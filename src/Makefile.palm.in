

INCLUDES=-I.. -I. -Ios/palmos/sysheaders -I../ -I../../ -Ibase -Iparser -Ios/palmos

CC=m68k-palmos-gcc
CFLAGS=-palmos3.5 -DHAVE_CONFIG_H
RANLIB=m68k-palmos-ranlib
SED=sed
MAKE=make

libgwenhywfar_a_SOURCES=\
  base/buffer.c \
  base/debug.c \
  base/error.c \
  base/list.c \
  base/logger.c \
  base/stringlist.c \
  os/palmos/directory.c \
  os/palmos/inetaddr.c \
  os/palmos/inetsocket.c \
  os/palmos/init.c \
  os/palmos/libloader.c \
  os/palmos/process.c \
  parser/csv.c \
  parser/db.c \
  parser/msgengine.c \
  parser/path.c \
  parser/text.c \
  parser/xml.c \
  gwenhywfar.c


libgwenhywfar.a: $(libgwenhywfar_a_SOURCES) #config.h
	objs=`echo $(libgwenhywfar_a_SOURCES) | ${SED} -e "s/\.c/\.o/g"` ; \
	for f in $$objs; do \
	  $(MAKE) -f Makefile.palm $$f || exit 1;  \
	done ; \
	ar -r libgwenhywfar.a $$objs ; \
	$(RANLIB) libgwenhywfar.a

#config.h: os/palmos/palmconfig.h
#	echo "/* Created by Makefile.palm */" >config.h ; \
#	cat os/palmos/palmconfig.h >>config.h

clean::
	objs=`echo $(libgwenhywfar_a_SOURCES) | ${SED} -e "s/\.c/\.o/g"` ; \
	for f in $$objs; do \
	  rm -f $$f ;  \
	done; \
	rm -f libgwenhywfar.a config.h


.c.o:
	${CC} ${CFLAGS} ${INCLUDES} -c $< -o $@


all: libgwenhywfar.a
