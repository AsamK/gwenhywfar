/* This file is auto-generated from "st_log.xml" by the typemaker
   tool of Gwenhywfar. 
   Do not edit this file -- all changes will be lost! */
#ifdef HAVE_CONFIG_H
# include "config.h"
#endif

#include "st_log_p.h"
#include <gwenhywfar/misc.h>
#include <gwenhywfar/db.h>
#include <gwenhywfar/debug.h>
#include <assert.h>
#include <stdlib.h>
#include <strings.h>

#include <gwenhywfar/gwenhywfarapi.h>


GWEN_LIST_FUNCTIONS(GWEN_STO_LOG, GWEN_StoLog)


GWEN_STO_LOG_ACTION GWEN_StoLog_Action_fromString(const char *s) {
  if (s) {
    if (strcasecmp(s, "none")==0)
      return GWEN_StoLog_ActionNone;
    else if (strcasecmp(s, "typeCreate")==0)
      return GWEN_StoLog_ActionTypeCreate;
    else if (strcasecmp(s, "typeDelete")==0)
      return GWEN_StoLog_ActionTypeDelete;
    else if (strcasecmp(s, "typeAddVar")==0)
      return GWEN_StoLog_ActionTypeAddVar;
    else if (strcasecmp(s, "objectCreate")==0)
      return GWEN_StoLog_ActionObjectCreate;
    else if (strcasecmp(s, "objectDelete")==0)
      return GWEN_StoLog_ActionObjectDelete;
    else if (strcasecmp(s, "objectSetValue")==0)
      return GWEN_StoLog_ActionObjectSetValue;
    else if (strcasecmp(s, "objectIncRef")==0)
      return GWEN_StoLog_ActionObjectIncRef;
    else if (strcasecmp(s, "objectDecRef")==0)
      return GWEN_StoLog_ActionObjectDecRef;
    else if (strcasecmp(s, "beginEdit")==0)
      return GWEN_StoLog_ActionBeginEdit;
    else if (strcasecmp(s, "endEdit")==0)
      return GWEN_StoLog_ActionEndEdit;
  }
  return GWEN_StoLog_ActionUnknown;
}


const char *GWEN_StoLog_Action_toString(GWEN_STO_LOG_ACTION v) {
  switch(v) {
    case GWEN_StoLog_ActionNone:
      return "none";

    case GWEN_StoLog_ActionTypeCreate:
      return "typeCreate";

    case GWEN_StoLog_ActionTypeDelete:
      return "typeDelete";

    case GWEN_StoLog_ActionTypeAddVar:
      return "typeAddVar";

    case GWEN_StoLog_ActionObjectCreate:
      return "objectCreate";

    case GWEN_StoLog_ActionObjectDelete:
      return "objectDelete";

    case GWEN_StoLog_ActionObjectSetValue:
      return "objectSetValue";

    case GWEN_StoLog_ActionObjectIncRef:
      return "objectIncRef";

    case GWEN_StoLog_ActionObjectDecRef:
      return "objectDecRef";

    case GWEN_StoLog_ActionBeginEdit:
      return "beginEdit";

    case GWEN_StoLog_ActionEndEdit:
      return "endEdit";

    default:
      return "unknown";
  } /* switch */
} 




GWEN_STO_LOG *GWEN_StoLog_new() {
  GWEN_STO_LOG *st;

  GWEN_NEW_OBJECT(GWEN_STO_LOG, st)
  st->_usage=1;
  GWEN_LIST_INIT(GWEN_STO_LOG, st)
  return st;
}


void GWEN_StoLog_free(GWEN_STO_LOG *st) {
  if (st) {
    assert(st->_usage);
    if (--(st->_usage)==0) {
  if (st->userName)
    free(st->userName);
  if (st->typeBaseName)
    free(st->typeBaseName);
  if (st->typeName)
    free(st->typeName);
  if (st->param1)
    free(st->param1);
  if (st->param2)
    free(st->param2);
  if (st->param3)
    free(st->param3);
  GWEN_LIST_FINI(GWEN_STO_LOG, st)
  GWEN_FREE_OBJECT(st);
    }
  }

}


GWEN_STO_LOG *GWEN_StoLog_dup(const GWEN_STO_LOG *d) {
  GWEN_STO_LOG *st;

  assert(d);
  st=GWEN_StoLog_new();
  if (d->userName)
    st->userName=strdup(d->userName);
  st->logAction=d->logAction;
  if (d->typeBaseName)
    st->typeBaseName=strdup(d->typeBaseName);
  if (d->typeName)
    st->typeName=strdup(d->typeName);
  st->objectId=d->objectId;
  if (d->param1)
    st->param1=strdup(d->param1);
  if (d->param2)
    st->param2=strdup(d->param2);
  if (d->param3)
    st->param3=strdup(d->param3);
  return st;
}


int GWEN_StoLog_toDb(const GWEN_STO_LOG *st, GWEN_DB_NODE *db) {
  assert(st);
  assert(db);
  if (st->userName)
    if (GWEN_DB_SetCharValue(db, GWEN_DB_FLAGS_OVERWRITE_VARS, "userName", st->userName))
      return -1;
  if (GWEN_DB_SetCharValue(db, GWEN_DB_FLAGS_OVERWRITE_VARS, "logAction", GWEN_StoLog_Action_toString(st->logAction))) 
    return -1;
  if (st->typeBaseName)
    if (GWEN_DB_SetCharValue(db, GWEN_DB_FLAGS_OVERWRITE_VARS, "typeBaseName", st->typeBaseName))
      return -1;
  if (st->typeName)
    if (GWEN_DB_SetCharValue(db, GWEN_DB_FLAGS_OVERWRITE_VARS, "typeName", st->typeName))
      return -1;
  if (GWEN_DB_SetIntValue(db, GWEN_DB_FLAGS_OVERWRITE_VARS, "objectId", st->objectId))
    return -1;
  if (st->param1)
    if (GWEN_DB_SetCharValue(db, GWEN_DB_FLAGS_OVERWRITE_VARS, "param1", st->param1))
      return -1;
  if (st->param2)
    if (GWEN_DB_SetCharValue(db, GWEN_DB_FLAGS_OVERWRITE_VARS, "param2", st->param2))
      return -1;
  if (st->param3)
    if (GWEN_DB_SetCharValue(db, GWEN_DB_FLAGS_OVERWRITE_VARS, "param3", st->param3))
      return -1;
  return 0;
}


int GWEN_StoLog_ReadDb(GWEN_STO_LOG *st, GWEN_DB_NODE *db) {
  assert(st);
  assert(db);
  GWEN_StoLog_SetUserName(st, GWEN_DB_GetCharValue(db, "userName", 0, 0));
  GWEN_StoLog_SetLogAction(st, GWEN_StoLog_Action_fromString(GWEN_DB_GetCharValue(db, "logAction", 0, 0)));
  GWEN_StoLog_SetTypeBaseName(st, GWEN_DB_GetCharValue(db, "typeBaseName", 0, 0));
  GWEN_StoLog_SetTypeName(st, GWEN_DB_GetCharValue(db, "typeName", 0, 0));
  GWEN_StoLog_SetObjectId(st, GWEN_DB_GetIntValue(db, "objectId", 0, 0));
  GWEN_StoLog_SetParam1(st, GWEN_DB_GetCharValue(db, "param1", 0, 0));
  GWEN_StoLog_SetParam2(st, GWEN_DB_GetCharValue(db, "param2", 0, 0));
  GWEN_StoLog_SetParam3(st, GWEN_DB_GetCharValue(db, "param3", 0, 0));
  return 0;
}


GWEN_STO_LOG *GWEN_StoLog_fromDb(GWEN_DB_NODE *db) {
  GWEN_STO_LOG *st;

  assert(db);
  st=GWEN_StoLog_new();
  GWEN_StoLog_ReadDb(st, db);
  st->_modified=0;
  return st;
}




const char *GWEN_StoLog_GetUserName(const GWEN_STO_LOG *st) {
  assert(st);
  return st->userName;
}


void GWEN_StoLog_SetUserName(GWEN_STO_LOG *st, const char *d) {
  assert(st);
  if (st->userName)
    free(st->userName);
  if (d && *d)
    st->userName=strdup(d);
  else
    st->userName=0;
  st->_modified=1;
}




GWEN_STO_LOG_ACTION GWEN_StoLog_GetLogAction(const GWEN_STO_LOG *st) {
  assert(st);
  return st->logAction;
}


void GWEN_StoLog_SetLogAction(GWEN_STO_LOG *st, GWEN_STO_LOG_ACTION d) {
  assert(st);
  st->logAction=d;
  st->_modified=1;
}




const char *GWEN_StoLog_GetTypeBaseName(const GWEN_STO_LOG *st) {
  assert(st);
  return st->typeBaseName;
}


void GWEN_StoLog_SetTypeBaseName(GWEN_STO_LOG *st, const char *d) {
  assert(st);
  if (st->typeBaseName)
    free(st->typeBaseName);
  if (d && *d)
    st->typeBaseName=strdup(d);
  else
    st->typeBaseName=0;
  st->_modified=1;
}




const char *GWEN_StoLog_GetTypeName(const GWEN_STO_LOG *st) {
  assert(st);
  return st->typeName;
}


void GWEN_StoLog_SetTypeName(GWEN_STO_LOG *st, const char *d) {
  assert(st);
  if (st->typeName)
    free(st->typeName);
  if (d && *d)
    st->typeName=strdup(d);
  else
    st->typeName=0;
  st->_modified=1;
}




GWEN_TYPE_UINT32 GWEN_StoLog_GetObjectId(const GWEN_STO_LOG *st) {
  assert(st);
  return st->objectId;
}


void GWEN_StoLog_SetObjectId(GWEN_STO_LOG *st, GWEN_TYPE_UINT32 d) {
  assert(st);
  st->objectId=d;
  st->_modified=1;
}




const char *GWEN_StoLog_GetParam1(const GWEN_STO_LOG *st) {
  assert(st);
  return st->param1;
}


void GWEN_StoLog_SetParam1(GWEN_STO_LOG *st, const char *d) {
  assert(st);
  if (st->param1)
    free(st->param1);
  if (d && *d)
    st->param1=strdup(d);
  else
    st->param1=0;
  st->_modified=1;
}




const char *GWEN_StoLog_GetParam2(const GWEN_STO_LOG *st) {
  assert(st);
  return st->param2;
}


void GWEN_StoLog_SetParam2(GWEN_STO_LOG *st, const char *d) {
  assert(st);
  if (st->param2)
    free(st->param2);
  if (d && *d)
    st->param2=strdup(d);
  else
    st->param2=0;
  st->_modified=1;
}




const char *GWEN_StoLog_GetParam3(const GWEN_STO_LOG *st) {
  assert(st);
  return st->param3;
}


void GWEN_StoLog_SetParam3(GWEN_STO_LOG *st, const char *d) {
  assert(st);
  if (st->param3)
    free(st->param3);
  if (d && *d)
    st->param3=strdup(d);
  else
    st->param3=0;
  st->_modified=1;
}




int GWEN_StoLog_IsModified(const GWEN_STO_LOG *st) {
  assert(st);
  return st->_modified;
}


void GWEN_StoLog_SetModified(GWEN_STO_LOG *st, int i) {
  assert(st);
  st->_modified=i;
}


void GWEN_StoLog_Attach(GWEN_STO_LOG *st) {
  assert(st);
  st->_usage++;
}
GWEN_STO_LOG_LIST *GWEN_StoLog_List_dup(const GWEN_STO_LOG_LIST *stl) {
  if (stl) {
    GWEN_STO_LOG_LIST *nl;
    GWEN_STO_LOG *e;

    nl=GWEN_StoLog_List_new();
    e=GWEN_StoLog_List_First(stl);
    while(e) {
      GWEN_STO_LOG *ne;

      ne=GWEN_StoLog_dup(e);
      assert(ne);
      GWEN_StoLog_List_Add(ne, nl);
      e=GWEN_StoLog_List_Next(e);
    } /* while (e) */
    return nl;
  }
  else
    return 0;
}




